<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <title>BlueMap Lib Test</title>
    <link rel="shortcut icon" href="favicon.png">
</head>
<body style="margin: 0; padding: 0;">
    <div id="map-container" style="position: absolute; width: 100%; height: 100%;"></div>

    <script type="text/javascript" src="js/three.js"></script>
    <script type="text/javascript" src="js/hammer.js"></script>
    <script type="text/javascript" src="js/bluemap.js"></script>

    <script type="text/javascript">
        let bluemap = new BlueMap.MapViewer(document.getElementById("map-container"));

        // show stats panel
        bluemap.stats.showPanel(1);

        // load map
        let maps = [];
        let markerManager = null;
        let playerManager = null;
        BlueMap.loadMaps("data/", bluemap.events).then(loadedMaps => {
            maps = loadedMaps;

            markerManager = new BlueMap.MarkerFileManager(bluemap.markerScene, "data/markers.json", maps[0].id, bluemap.events);
            markerManager.update();
            markerManager.setAutoUpdateInterval(1000 * 10);

            playerManager = new BlueMap.PlayerMarkerManager(bluemap.markerScene, "live/players", "", bluemap.events);
            playerManager.update();
            playerManager.setAutoUpdateInterval(1000);

            bluemap.setMap(maps[0]).then(() => {
                playerManager.worldId = maps[0].world;
            });
        });
    </script>
</body>
</html>